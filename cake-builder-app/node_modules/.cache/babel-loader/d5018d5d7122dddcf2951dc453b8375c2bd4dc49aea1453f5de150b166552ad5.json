{"ast":null,"code":"var _jsxFileName = \"D:\\\\M\\xF4n h\\u1ECDc\\\\C\\xF4ng ngh\\u1EC7 Java\\\\cake-builder-app\\\\src\\\\components\\\\preview\\\\CakePreview.jsx\",\n  _s = $RefreshSig$();\n// // File: src/components/CakePreview.jsx\n// import React from 'react';\n// import { useDrop } from 'react-dnd';\n\n// function CakePreview({ layers, tier, onDropLayer }) {\n//   const baseX = 200;\n//   const baseY = 300;\n\n//   const [{ isOver }, drop] = useDrop(() => ({\n//     accept: 'layer',\n//     drop: (item) => {\n//       onDropLayer(item.layerType, item.src);\n//     },\n//     collect: (monitor) => ({\n//       isOver: !!monitor.isOver(),\n//     }),\n//   }));\n\n//   const getStyle = (layerType) => {\n//     switch (layerType) {\n//       case 'shape':\n//         return { left: baseX, top: baseY };\n//       case 'color':\n//         return { left: baseX, top: baseY, position: 'absolute' };\n//       case 'creamMiddle':\n//         return { left: baseX, top: baseY - 22.6, position: 'absolute' };\n//       case 'colorTier2':\n//         return {\n//           left: baseX + 37.6,\n//           top: baseY - 61.9,\n//           transform: 'scale(0.8)',\n//           position: 'absolute',\n//         };\n//       case 'creamTop':\n//       case 'smooth':\n//         if (tier === 2) {\n//           return {\n//             left: baseX + 37.6,\n//             top: baseY - 61.9,\n//             transform: 'scale(0.8)',\n//             position: 'absolute',\n//           };\n//         } else {\n//           return { left: baseX, top: baseY - 22.6, position: 'absolute' };\n//         }\n//       default:\n//         return {};\n//     }\n//   };\n\n//   return (\n//     <div\n//       ref={drop}\n//       className={`relative w-[500px] h-[400px] border bg-white ${\n//         isOver ? 'border-blue-500' : ''\n//       }`}\n//     >\n//       {Object.entries(layers).map(([key, src]) =>\n//         src ? (\n//           <img\n//             key={key}\n//             src={src}\n//             alt={key}\n//             className=\"absolute\"\n//             style={getStyle(key)}\n//           />\n//         ) : null\n//       )}\n//     </div>\n//   );\n// }\n\n// export default CakePreview;\nimport React, { useRef, useEffect, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CakePreview({\n  initialLayers = []\n}) {\n  _s();\n  const canvasRef = useRef(null);\n  const [layers, setLayers] = useState(initialLayers);\n  useEffect(() => {\n    const canvas = canvasRef.current;\n    if (!canvas || !layers.length) return;\n    const ctx = canvas.getContext('2d');\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    const drawLayers = async () => {\n      for (const src of layers) {\n        await new Promise(resolve => {\n          const img = new Image();\n          img.src = src;\n          img.onload = () => {\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            resolve();\n          };\n        });\n      }\n    };\n    drawLayers();\n  }, [layers]);\n  const handleDownload = () => {\n    const canvas = canvasRef.current;\n    const image = canvas.toDataURL('image/png');\n    const link = document.createElement('a');\n    link.href = image;\n    link.download = 'cake.png';\n    link.click();\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    const src = e.dataTransfer.getData('data');\n    if (src) {\n      setLayers(prev => [...prev, src]);\n    }\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: 300,\n      height: 300,\n      className: \"border mb-2\",\n      onDrop: handleDrop,\n      onDragOver: handleDragOver\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleDownload,\n      className: \"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\",\n      children: \"T\\u1EA3i \\u1EA3nh b\\xE1nh\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n}\n_s(CakePreview, \"E5RUMcCRRw6kiFLAVkAly15Pf70=\");\n_c = CakePreview;\nexport default CakePreview;\nvar _c;\n$RefreshReg$(_c, \"CakePreview\");","map":{"version":3,"names":["React","useRef","useEffect","useState","jsxDEV","_jsxDEV","CakePreview","initialLayers","_s","canvasRef","layers","setLayers","canvas","current","length","ctx","getContext","clearRect","width","height","drawLayers","src","Promise","resolve","img","Image","onload","drawImage","handleDownload","image","toDataURL","link","document","createElement","href","download","click","handleDrop","e","preventDefault","dataTransfer","getData","prev","handleDragOver","className","children","ref","onDrop","onDragOver","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["D:/Môn học/Công nghệ Java/cake-builder-app/src/components/preview/CakePreview.jsx"],"sourcesContent":["// // File: src/components/CakePreview.jsx\r\n// import React from 'react';\r\n// import { useDrop } from 'react-dnd';\r\n\r\n// function CakePreview({ layers, tier, onDropLayer }) {\r\n//   const baseX = 200;\r\n//   const baseY = 300;\r\n\r\n//   const [{ isOver }, drop] = useDrop(() => ({\r\n//     accept: 'layer',\r\n//     drop: (item) => {\r\n//       onDropLayer(item.layerType, item.src);\r\n//     },\r\n//     collect: (monitor) => ({\r\n//       isOver: !!monitor.isOver(),\r\n//     }),\r\n//   }));\r\n\r\n//   const getStyle = (layerType) => {\r\n//     switch (layerType) {\r\n//       case 'shape':\r\n//         return { left: baseX, top: baseY };\r\n//       case 'color':\r\n//         return { left: baseX, top: baseY, position: 'absolute' };\r\n//       case 'creamMiddle':\r\n//         return { left: baseX, top: baseY - 22.6, position: 'absolute' };\r\n//       case 'colorTier2':\r\n//         return {\r\n//           left: baseX + 37.6,\r\n//           top: baseY - 61.9,\r\n//           transform: 'scale(0.8)',\r\n//           position: 'absolute',\r\n//         };\r\n//       case 'creamTop':\r\n//       case 'smooth':\r\n//         if (tier === 2) {\r\n//           return {\r\n//             left: baseX + 37.6,\r\n//             top: baseY - 61.9,\r\n//             transform: 'scale(0.8)',\r\n//             position: 'absolute',\r\n//           };\r\n//         } else {\r\n//           return { left: baseX, top: baseY - 22.6, position: 'absolute' };\r\n//         }\r\n//       default:\r\n//         return {};\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div\r\n//       ref={drop}\r\n//       className={`relative w-[500px] h-[400px] border bg-white ${\r\n//         isOver ? 'border-blue-500' : ''\r\n//       }`}\r\n//     >\r\n//       {Object.entries(layers).map(([key, src]) =>\r\n//         src ? (\r\n//           <img\r\n//             key={key}\r\n//             src={src}\r\n//             alt={key}\r\n//             className=\"absolute\"\r\n//             style={getStyle(key)}\r\n//           />\r\n//         ) : null\r\n//       )}\r\n//     </div>\r\n//   );\r\n// }\r\n\r\n// export default CakePreview;\r\nimport React, { useRef, useEffect, useState } from 'react';\r\n\r\nfunction CakePreview({ initialLayers = [] }) {\r\n  const canvasRef = useRef(null);\r\n  const [layers, setLayers] = useState(initialLayers);\r\n\r\n  useEffect(() => {\r\n    const canvas = canvasRef.current;\r\n    if (!canvas || !layers.length) return;\r\n\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n    const drawLayers = async () => {\r\n      for (const src of layers) {\r\n        await new Promise((resolve) => {\r\n          const img = new Image();\r\n          img.src = src;\r\n          img.onload = () => {\r\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\r\n            resolve();\r\n          };\r\n        });\r\n      }\r\n    };\r\n\r\n    drawLayers();\r\n  }, [layers]);\r\n\r\n  const handleDownload = () => {\r\n    const canvas = canvasRef.current;\r\n    const image = canvas.toDataURL('image/png');\r\n    const link = document.createElement('a');\r\n    link.href = image;\r\n    link.download = 'cake.png';\r\n    link.click();\r\n  };\r\n\r\n  const handleDrop = (e) => {\r\n    e.preventDefault();\r\n    const src = e.dataTransfer.getData('data');\r\n    if (src) {\r\n      setLayers((prev) => [...prev, src]);\r\n    }\r\n  };\r\n\r\n  const handleDragOver = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <div className=\"text-center\">\r\n      <canvas\r\n        ref={canvasRef}\r\n        width={300}\r\n        height={300}\r\n        className=\"border mb-2\"\r\n        onDrop={handleDrop}\r\n        onDragOver={handleDragOver}\r\n      />\r\n      <button\r\n        onClick={handleDownload}\r\n        className=\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\"\r\n      >\r\n        Tải ảnh bánh\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CakePreview;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}